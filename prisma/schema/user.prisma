model User {
  id       Int     @id @default(autoincrement())
  name     String
  email    String
  phone    String
  password String
  verified Boolean @default(false)
  active   Boolean @default(true)
  image    String  @default("uploads/default.png")

  // default columns
  createdAt DateTime  @default(now()) @map("created_at")
  deletedAt DateTime? @map("deleted_at")

  // direct relations
  Role   Role @relation(fields: [roleId], references: [id], onDelete: Cascade)
  roleId Int  @map("role_id")

  // relations
  OTPs          OTP[]
  Sessions      Session[]
  Notifications Notification[]
  Details       Details?
  Address       Address?

  @@unique([email, roleId])
  @@unique([phone, roleId])
  @@index([phone, roleId])
  @@index([email, roleId])
  @@map("users")
}

model Details {
  userId Int  @id @unique @map("user_id")
  User   User @relation(fields: [userId], references: [id], onDelete: Cascade)

  wallet Float?   @default(0.0)
  male   Boolean?

  @@map("details")
}

model Address {
  userId Int  @id @unique @map("user_id")
  User   User @relation(fields: [userId], references: [id], onDelete: Cascade)

  address String @map("address")
  lat     Float  @map("lat")
  lng     Float  @map("lng")

  @@map("addresses")
}
